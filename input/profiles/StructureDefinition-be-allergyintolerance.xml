<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="be-allergyintolerance" />
  <url value="https://www.ehealth.fgov.be/standards/fhir/StructureDefinition/be-allergyintolerance" />
  <version value="1.0.0" />
  <name value="BeAllergyIntolerance" />
  <status value="active" />
  <description value="Belgian federal profile for an allergy and/or an intolerance. Initially based on the functional description of the NIHDI." />
  <fhirVersion value="4.0.1" />
  <kind value="resource" />
  <abstract value="false" />
  <type value="AllergyIntolerance" />
  <baseDefinition value="http://hl7.org/fhir/StructureDefinition/AllergyIntolerance" />
  <derivation value="constraint" />

  <differential>
    <element id="AllergyIntolerance.extension">
      <path value="AllergyIntolerance.extension" />
      <definition value="The clinical status of the allergy or intolerance.&#xD;&#xA;&#xD;&#xA;When available, a provider SHOULD include it. When given, a consumer SHALL record this in its consuming system." />
      <slicing>
        <discriminator>
          <type value="value"/>
          <path value="url"/>
        </discriminator>
        <ordered value="false"/>
        <rules value="open"/>
      </slicing>
    </element>
    <element id="AllergyIntolerance.extension:exposureRisk">
      <path value="AllergyIntolerance.extension" />
      <short value="The risk or consequences of a possible exposure" />
      <definition value="The risk or consequences of a possible exposure" />
      <sliceName value="exposureRisk"/>
      <min value="0"/>
      <max value="*"/>
      <type>
        <code value="Extension"/>
        <profile value="https://www.hl7belgium.org/fhir/StructureDefinition/exposure-risk"/>
      </type>
    </element>
    <element id="AllergyIntolerance.clinicalStatus">
      <path value="AllergyIntolerance.clinicalStatus" />
      <definition value="The clinical status of the allergy or intolerance.&#xD;&#xA;&#xD;&#xA;When available, a provider SHOULD include it. When given, a consumer SHALL record this in its consuming system." />
      <mustSupport value="true" />
    </element>
    <element id="AllergyIntolerance.verificationStatus">
      <path value="AllergyIntolerance.verificationStatus" />
      <definition value="Assertion about certainty associated with the propensity, or potential risk, of a reaction to the identified substance (including pharmaceutical product).&#xD;&#xA;&#xD;&#xA;When available, a provider SHOULD include it. When given, a consumer SHALL record this in its consuming system." />
      <mustSupport value="true" />
    </element>
    <element id="AllergyIntolerance.type">
      <path value="AllergyIntolerance.type" />
      <definition value="Identification of the underlying physiological mechanism for the reaction risk.&#xD;&#xA;&#xD;&#xA;When available, a provider SHOULD include it. When given, a consumer SHALL record this in its consuming system." />
      <mustSupport value="true" />
    </element>
    <element id="AllergyIntolerance.category">
      <path value="AllergyIntolerance.category" />
      <definition value="Category of the identified substance.&#xD;&#xA;&#xD;&#xA;When available, a provider SHOULD include it in the istance. When given, a consumer SHALL record this in its consuming system." />
      <mustSupport value="true" />
    </element>
    <element id="AllergyIntolerance.code">
      <path value="AllergyIntolerance.code" />
      <definition value="Code for an allergy or intolerance statement (either a positive or a negated/excluded statement).  This may be a code for a substance or pharmaceutical product that is considered to be responsible for the adverse reaction risk (e.g., &quot;Latex&quot;), an allergy or intolerance condition (e.g., &quot;Latex allergy&quot;), or a negated/excluded code for a specific substance or class (e.g., &quot;No latex allergy&quot;) or a general or categorical negated statement (e.g.,  &quot;No known allergy&quot;, &quot;No known drug allergies&quot;).  Note: the substance for a specific reaction may be different from the substance identified as the cause of the risk, but it must be consistent with it. For instance, it may be a more specific substance (e.g. a brand medication) or a composite product that includes the identified substance. It must be clinically safe to only process the 'code' and ignore the 'reaction.substance'.  If a receiving system is unable to confirm that AllergyIntolerance.reaction.substance falls within the semantic scope of AllergyIntolerance.code, then the receiving system should ignore AllergyIntolerance.reaction.substance.&#xD;&#xA;&#xD;&#xA;A provider SHALL include it in the istance and a consumer SHALL record this in its consuming system.  If needed codes can be used outside the given valueset, SNOMED-CT is preferred." />
      <min value="1" />
      <mustSupport value="true" />
      <binding>
        <strength value="required" />
        <description value="Causative agent codes as defined by NIHDI" />
      <valueSet value="https://www.ehealth.fgov.be/standards/fhir/ValueSet/be-allergyintolerancecode" />
      </binding>
    </element>
    <element id="AllergyIntolerance.patient">
      <path value="AllergyIntolerance.patient" />
      <definition value="The patient who has the allergy or intolerance.&#xD;&#xA;&#xD;&#xA;A provider SHALL include it in the istance and a consumer SHALL record this in its consuming system." />
      <type>
        <code value="Reference" />
        <targetProfile value="https://www.ehealth.fgov.be/standards/fhir/StructureDefinition/be-patient" />
      </type>
      <mustSupport value="true" />
    </element>
    <element id="AllergyIntolerance.recordedDate">
      <path value="AllergyIntolerance.recordedDate" />
      <definition value="The recordedDate represents when this particular AllergyIntolerance record was created in the system, which is often a system-generated date.&#xD;&#xA;&#xD;&#xA;A provider SHALL include it in the istance and a consumer SHALL record this in its consuming system." />
      <min value="1" />
      <mustSupport value="true" />
    </element>
    <element id="AllergyIntolerance.recorder">
      <path value="AllergyIntolerance.recorder" />
      <definition value="Individual who recorded the record and takes responsibility for its content.&#xD;&#xA;&#xD;&#xA;A provider SHALL include it in the istance and a consumer SHALL record this in its consuming system." />
      <comment value="References SHALL be a reference to an actual FHIR resource, and SHALL be resolveable (allowing for access control, temporary unavailability, etc.). Resolution can be either by retrieval from the URL, or, where applicable by resource type, by treating an absolute reference as a canonical URL and looking it up in a local registry/repository.&#xD;&#xA;&#xD;&#xA;Special remarks for KMEHR users:&#xD;&#xA;This is the 'author' concept in a KMEHR message as the FHIR recorder is the party taking responsibility." />
      <min value="1" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Practitioner" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/PractitionerRole" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Patient" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/RelatedPerson" />
        <targetProfile value="https://www.ehealth.fgov.be/standards/fhir/StructureDefinition/be-patient" />
        <targetProfile value="https://www.ehealth.fgov.be/standards/fhir/StructureDefinition/be-practitioner" />
        <targetProfile value="https://www.ehealth.fgov.be/standards/fhir/StructureDefinition/be-practitionerrole" />
      </type>
      <mustSupport value="true" />
    </element>
    <element id="AllergyIntolerance.asserter">
      <path value="AllergyIntolerance.asserter" />
      <definition value="The source of the information about the allergy that is recorded.&#xD;&#xA;&#xD;&#xA;When available, a provider SHOULD include it in the istance. When given, a consumer SHALL record this in its consuming system." />
      <comment value="The recorder takes responsibility for the content, but can reference the source from where they got it.&#xD;&#xA;&#xD;&#xA;Special remarks for KMEHR users:&#xD;&#xA;As the FHIR asserter is not the party taking responsibility, this is not equal to the 'author' concept in KMEHR." />
      <mustSupport value="true" />
    </element>
    <element id="AllergyIntolerance.note">
      <path value="AllergyIntolerance.note" />
      <comment value="For example: including reason for flagging a seriousness of 'High Risk'; and instructions related to future exposure or administration of the substance, such as administration within an Intensive Care Unit or under corticosteroid cover. The notes should be related to an allergy or intolerance as a condition in general and not related to any particular episode of it. For episode notes and descriptions, use AllergyIntolerance.event.description and  AllergyIntolerance.event.notes.&#xD;&#xA;&#xD;&#xA;When available, a provider SHOULD include it. When given, a consumer SHALL record this in its consuming system." />
      <mustSupport value="true" />
    </element>
    <element id="AllergyIntolerance.reaction">
      <path value="AllergyIntolerance.reaction" />
      <definition value="Details about each adverse reaction event linked to exposure to the identified substance.&#xD;&#xA;&#xD;&#xA;When available, a provider SHOULD include it in the istance. When given, a consumer SHALL record this in its consuming system." />
      <mustSupport value="true" />
    </element>
    <element id="AllergyIntolerance.reaction.substance">
      <path value="AllergyIntolerance.reaction.substance" />
      <mustSupport value="false" />
    </element>
    <element id="AllergyIntolerance.reaction.manifestation">
      <path value="AllergyIntolerance.reaction.manifestation" />
      <definition value="Clinical symptoms and/or signs that are observed or associated with the adverse reaction event.&#xD;&#xA;&#xD;&#xA;When available, a provider SHOULD include it. When given, a consumer SHALL record this in its consuming system. If needed codes can be used outside the given valueset, SNOMED-CT is preferred." />
      <mustSupport value="true" />
      <binding>
        <strength value="extensible" />
        <valueSet value="https://www.ehealth.fgov.be/standards/fhir/ValueSet/be-riskmanifestation" />
      </binding>
    </element>
    <element id="AllergyIntolerance.reaction.onset">
      <path value="AllergyIntolerance.reaction.onset" />
      <mustSupport value="false" />
    </element>
    <element id="AllergyIntolerance.reaction.exposureRoute">
      <path value="AllergyIntolerance.reaction.exposureRoute" />
      <definition value="Identification of the route by which the subject was exposed to the substance.  If needed codes can be used outside the given valueset, SNOMED-CT is preferred." />
    </element>
    <element id="AllergyIntolerance.reaction.exposureRoute.coding">
      <path value="AllergyIntolerance.reaction.exposureRoute.coding" />
      <binding>
        <strength value="extensible" />
        <valueSet value="https://www.ehealth.fgov.be/standards/fhir/ValueSet/be-exposureroute" />
      </binding>
    </element>
    <element id="AllergyIntolerance.reaction.note">
      <path value="AllergyIntolerance.reaction.note" />
      <definition value="Additional text about the adverse reaction event not captured in other fields.&#xD;&#xA;&#xD;&#xA;A note on this level SHOULD be avoided when not absolutely necessary. Preferably use the .note one level higher." />
      <mustSupport value="false" />
    </element>
  </differential>
</StructureDefinition>